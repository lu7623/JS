(()=>{"use strict";var e={619:(e,t,s)=>{s.r(t),s.d(t,{levels:()=>n,state:()=>l});const n=[{name:"easy",width:10,height:10},{name:"medium",width:15,height:15},{name:"hard",width:25,height:25}],l={level:n[0],sound:!0,theme:"light",bombcount:10,time:0,steps:0,cellsOpen:0}}},t={};function s(n){var l=t[n];if(void 0!==l)return l.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var l=n.length-1;l>-1&&!e;)e=n[l--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e=s(619);const{state:t}=s(619);function n(){const e=document.querySelector(".timer");e.value+=1,e.innerText=e.value.toString().padStart(3,"0")}let l;function a(){l=setInterval(n,1e3),document.querySelector(".field").classList.add("clicked")}function c(){clearInterval(l);const e=document.querySelector(".field");e.classList.remove("clicked");const s=document.querySelector(".timer");t.time=s.value,s.value=0,s.innerText=s.value.toString().padStart(3,"0"),e.removeEventListener("click",(()=>{0!=s.value||e.classList.contains("clicked")||a()}))}function o(){const e=document.querySelector(".field"),t=document.querySelector(".timer");e.addEventListener("click",(()=>{0!=t.value||e.classList.contains("clicked")||a()}))}function d(){const t=document.querySelector(".field");t.replaceChildren(),x();const s=document.querySelector(".counter");s.value=e.state.bombcount,s.innerText=s.value.toString().padStart(3,"0"),e.state.steps=0,document.getElementById("cellsOpen").innerText="Cells opened: 0",document.getElementById("steps").innerText="Steps: 0",t.removeEventListener("click",(t=>{e.state.steps+=1}))}function i(){const t=document.querySelectorAll(".cell"),s=document.querySelector("body"),n=document.querySelector(".field"),l=document.querySelector(".panel"),a=document.querySelector(".gameContainer"),c=document.querySelector(".counter"),o=document.querySelector(".replay"),d=document.querySelector(".timer"),i=document.querySelector(".score"),r=document.querySelector(".btn"),m=[[s,"body"],[n,"field"],[l,"panel"],[a,"gameContainer"],[c,"counter"],[o,"replay"],[d,"timer"],[document.querySelector(".settings"),"settings"],[r,"btn"],[i,"score"]];"light"===e.state.theme?(m.forEach((e=>{e[0].classList.add(`${e[1]}-light`),e[0].classList.remove(`${e[1]}-dark`)})),t.forEach((e=>{e.classList.add("cell-light"),e.classList.remove("cell-dark")}))):(m.forEach((e=>{e[0].classList.remove(`${e[1]}-light`),e[0].classList.add(`${e[1]}-dark`)})),t.forEach((e=>{e.classList.remove("cell-light"),e.classList.add("cell-dark")})))}function r(){const t=document.querySelector(".field");10==e.state.level.height?(t.classList.add("field-small"),t.classList.remove("field-large"),t.classList.remove("field-medium")):15==e.state.level.height?(t.classList.add("field-medium"),t.classList.remove("field-large"),t.classList.remove("field-small")):25==e.state.level.height&&(t.classList.add("field-large"),t.classList.remove("field-small"),t.classList.remove("field-medium")),t.replaceChildren(),x()}function m(){confirm("You lose! Play again!")&&(d(),c(),o())}let u=[];function p(){S.forEach((e=>{e.forEach((e=>{e.isBomb&&e.open()}))}));const t=document.querySelector(".timer");e.state.time=t.value;const s=document.querySelector(".score-container"),n=document.getElementById("cellsOpen");let l=[e.state.bombcount,e.state.time,e.state.steps,e.state.cellsOpen];u.unshift(l),u.length>10&&u.pop(),localStorage.setItem("userscore",u);const a=document.createElement("li");a.classList.add("result"),a.innerText=`Bombs found: ${e.state.bombcount}; Time: ${e.state.time}s;  Steps: ${e.state.steps}; ${n.innerText}`,s.prepend(a),confirm(`You win! Your result is: \n\n        Bombs found: ${e.state.bombcount} \n\n        Time: ${e.state.time} \n\n        Steps: ${e.state.steps} \n\n        Play again!`)&&(c(),d(),o())}function h(){localStorage.setItem("userlvl",e.state.level.name),localStorage.setItem("usertheme",e.state.theme),localStorage.setItem("usersound",e.state.sound),localStorage.setItem("userbombs",e.state.bombcount)}function v(t){if(e.state.sound){var s=document.createElement("audio");s.src=t,s.autoplay=!0,s.onended=function(){this.remove()},document.body.appendChild(s)}}const f=s.p+"d83df6d75c38e3d666782a91f28490e1.mp3",g=s.p+"44fa837f467410cb85bee6853e56edf3.mp3",b=s.p+"2edf7ac88422cc91cc41e37ddf08c014.mp3";class E{constructor(e,t){this.isBomb=e,this.coordinates=t}setCellValue(e){this.value=e}setType(){if(this.isBomb)return void this.setCellValue("ðŸ’£");const e=k(this.coordinates);let t=0;e.forEach((e=>{(1===e||e.isBomb)&&t++})),t&&this.setCellValue(t)}showCellValue(){this.cellElem.innerHTML=this.value||""}setFlag(e){this.isFlagged=e,this.cellElem.innerHTML=e?"ðŸš©":"",v(b);const t=document.querySelector(".counter");t.value>0&&(t.value-=1),t.innerText=t.value.toString().padStart(3,"0")}open(){this.isOpenned=!0,this.cellElem.classList.remove("cell-light"),this.cellElem.classList.remove("cell-dark"),this.cellElem.classList.add("cell-open"),this.showCellValue()}onCellClick(e=!1){if(this.isFlagged){this.setFlag(!1);const e=document.querySelector(".counter");return e.value+=2,void(e.innerText=e.value.toString().padStart(3,"0"))}if(this.value||this.isOpenned){if(this.value&&e||"number"==typeof this.value)this.open();else if(this.isBomb){v(L),S.forEach((e=>{e.forEach((e=>{e.isBomb&&e.open()}))})),c(),setTimeout(m,500);const e=document.querySelector(".replay");e.classList.remove("replay-smile"),e.classList.add("replay-dead")}}else this.open(),k(this.coordinates).forEach((e=>{e.isOpenned||e.onCellClick(!0)}));this.showCellValue()}createCellonField(t){const s=document.createElement("div");this.cellElem=s,s.classList.add("cell"),"light"==e.state.theme?s.classList.add("cell-light"):s.classList.add("cell-dark"),this.value&&s.classList.add(`cell-${this.value}`),this.cellElem.addEventListener("click",(()=>{this.onCellClick(),v(g);let e=0;T.forEach((t=>{t.isOpenned||(e+=1)})),0===e&&(setTimeout(p,500),v(f))})),this.cellElem.addEventListener("contextmenu",(e=>{e.preventDefault(),this.isFlagged?this.onCellClick():(this.setFlag(!0),v(b))})),t.append(s)}}const y=function(){const t=document.querySelector("body");t.classList.add("body");const s=document.createElement("main");t.append(s),s.classList.add("main-container");const n=document.createElement("h1");n.innerText="RSS Minesweeper",n.classList.add("title");const l=document.createElement("div");l.classList.add("gameContainer"),s.append(l);const a=document.createElement("div");a.classList.add("settings"),a.classList.add("hide");const c=document.createElement("div");c.classList.add("top"),c.classList.add("btn"),c.innerText="Settings";const o=document.createElement("div");o.classList.add("top"),o.classList.add("score"),o.innerText="Score";const d=document.createElement("div");d.classList.add("top-panel"),l.append(d),d.append(c),d.append(n),d.append(o);const i=document.createElement("div");i.classList.add("sound-check");const r=document.createElement("span");r.innerText="Sound";const m=document.createElement("label");m.classList.add("switch");const p=document.createElement("input");p.classList.add("optionsSwitch"),p.setAttribute("type","checkbox"),p.id="soundSet",p.checked=!0,m.append(p),i.append(r),i.append(m),a.append(i),l.append(a);const h=document.createElement("ol");h.classList.add("score-container"),h.classList.add("hide"),l.append(h);const v=document.createElement("div");v.innerText="Appearence mode",v.classList.add("theme-check"),a.append(v),["light","dark"].forEach((t=>{const s=document.createElement("div");s.classList.add("theme");const n=document.createElement("input");n.setAttribute("type","radio"),n.id=t,n.name="theme",n.value=t;const l=document.createElement("label");l.innerText=t,l.setAttribute("for","theme"),s.append(n),s.append(l),v.append(s),t===e.state.theme&&(n.checked=!0)}));const f=document.createElement("div");f.innerText="Difficulty level",f.classList.add("level-check"),a.append(f),["easy","medium","hard"].forEach((t=>{const s=document.createElement("div");s.classList.add("level");const n=document.createElement("input");n.setAttribute("type","radio"),n.id=t,n.name="level",n.value=t;const l=document.createElement("label");l.innerText=t,t===e.state.level.name&&(n.checked=!0),l.setAttribute("for","level"),s.append(n),s.append(l),f.append(s)})),a.append(f);const g=document.createElement("div");g.classList.add("panel");const b=document.createElement("div");b.classList.add("counter"),b.value=e.state.bombcount,b.innerText=b.value.toString().padStart(3,"0");const E=document.createElement("div");E.classList.add("replay"),E.classList.add("replay-smile");const y=document.createElement("div");y.classList.add("timer"),y.value=0,y.innerText=y.value.toString().padStart(3,"0");const L=document.createElement("div");L.classList.add("bombs");const S=document.createElement("input");S.setAttribute("type","range"),S.name="bombs",S.id="bombs",S.value=10,S.setAttribute("min","10"),S.setAttribute("max","99");const T=document.createElement("label");T.setAttribute("for","bombs"),T.innerText="   Bombs",L.append(S),L.append(T),l.append(g),g.append(b),g.append(E),g.append(y),a.append(L);const k=document.createElement("div");k.classList.add("field"),10==e.state.level.height?k.classList.add("field-small"):15==e.state.level.height?k.classList.add("field-medium"):25==e.state.level.height&&k.classList.add("field-large");const x=[[t,"body"],[k,"field"],[g,"panel"],[l,"gameContainer"],[b,"counter"],[E,"replay"],[y,"timer"],[a,"settings"],[c,"btn"],[o,"score"]];x.forEach((e=>{e[0].classList.add("theme-change")})),"light"==e.state.theme?x.forEach((e=>{e[0].classList.add(`${e[1]}-light`)})):x.forEach((e=>{e[0].classList.add(`${e[1]}-dark`)})),l.append(k);const q=document.createElement("div");q.classList.add("bottom-panel");const C=document.createElement("span");C.id="steps",C.innerText=`Steps: ${e.state.steps}`;const I=document.createElement("span");return I.id="cellsOpen",I.innerText="Cells opened: 0",l.append(q),q.append(C),q.append(I),function(){if(localStorage.getItem("userscore")){let e=localStorage.getItem("userscore").split(","),t=[];for(;e.length>0;)t.push(e.slice(0,4)),e.splice(0,4);t.forEach((e=>{u.push(e);const t=document.querySelector(".score-container"),s=document.createElement("li");s.classList.add("result"),s.innerText=`Bombs found: ${e[0]}; Time: ${e[1]}s;  Steps: ${e[2]}; Cells opened:${e[3]}`,t.append(s)}))}}(),k}(),L=s.p+"4d68c7921087610fc2365ad0a3e6a6be.mp3";let S=[],T=[];function k(e){const{x:t,y:s}=e,n=S[s-1]?.[t],l=S[s-1]?.[t+1],a=S[s]?.[t+1],c=S[s+1]?.[t+1],o=S[s+1]?.[t],d=S[s+1]?.[t-1],i=S[s]?.[t-1],r=S[s-1]?.[t-1];return[n,l,a,c,o,d,i,r].filter((e=>void 0!==e))}function x(t=e.state.level.width,s=e.state.level.height,n=e.state.bombcount){S=Array.from({length:s},(()=>Array.from({length:t},(()=>0)))),function(e){let t=e;const s=S.length,n=S[0].length;for(;t;){const e=Math.floor(Math.random()*s),l=Math.floor(Math.random()*n);0==S[l][e]&&(S[l][e]=1,t-=1)}}(n),localStorage.setItem("usermatrix",S),T.length=0,S.forEach(((e,t)=>{e.forEach(((e,s)=>{const n=function(e,t){const s=new E(e,t);return s.setCellValue(),s.setType(),s.createCellonField(y),s}(Boolean(e),{x:s,y:t});S[t][s]=n,n.isBomb||T.push(n)}))}));const l=document.querySelector(".replay");l.classList.contains("replay-dead")&&(l.classList.remove("replay-dead"),l.classList.add("replay-smile"))}x(),function(){!function(){if(localStorage.getItem("usersound")){const t=document.getElementById("soundSet");"true"==localStorage.getItem("usersound")?(t.checked=!0,e.state.sound=!0):(t.checked=!1,e.state.sound=!1)}if(localStorage.getItem("usertheme")){let t=localStorage.getItem("usertheme");e.state.theme=t,document.getElementsByName("theme").forEach((e=>{e.value==t&&(e.checked=!0)})),i()}if(localStorage.getItem("userlvl")){let t=localStorage.getItem("userlvl");document.getElementsByName("level").forEach((e=>{e.value==t&&(e.checked=!0)})),e.levels.forEach((s=>{t==s.name&&(e.state.level=s,r())}))}if(localStorage.getItem("userbombs")){let t=localStorage.getItem("userbombs");e.state.bombcount=t,document.getElementById("bombs").value=t,d()}}();const t=document.querySelector(".btn"),s=document.querySelector(".settings");t.addEventListener("click",(()=>{t.classList.contains("btn-pressed")?(t.classList.remove("btn-pressed"),s.classList.add("hide")):(t.classList.add("btn-pressed"),s.classList.remove("hide"))}));const n=document.getElementById("soundSet");n.addEventListener("change",(()=>{n.checked?e.state.sound=!0:e.state.sound=!1})),document.getElementsByName("theme").forEach((t=>{t.addEventListener("change",(function(){e.state.theme=this.value,console.log(e.state),i()}))})),document.getElementsByName("level").forEach((t=>{t.addEventListener("change",(function(){e.levels.forEach((s=>{t.value==s.name&&(e.state.level=s,r())})),c(),o()}))})),document.querySelector(".replay").addEventListener("click",(()=>{d(),c(),o()}));const l=document.getElementById("bombs");l.addEventListener("change",(()=>{e.state.bombcount=l.value,d(),c(),o()})),document.querySelector(".field").addEventListener("click",(t=>{e.state.steps+=1;let s=0;document.getElementById("steps").innerText=`Steps: ${e.state.steps}`,S.forEach((e=>{e.forEach((e=>{e.isOpenned&&(s+=1)}))}));const n=document.getElementById("cellsOpen");e.state.cellsOpen=s,n.innerText=`Cells opened: ${s}`})),o();const a=document.querySelector(".score"),m=document.querySelector(".score-container");a.addEventListener("click",(()=>{a.classList.contains("btn-pressed")?(a.classList.remove("btn-pressed"),m.classList.add("hide")):(a.classList.add("btn-pressed"),m.classList.remove("hide"))})),window.addEventListener("beforeunload",h)}()})()})();