(()=>{"use strict";var e={619:(e,t,s)=>{s.r(t),s.d(t,{levels:()=>l,state:()=>n});const l=[{name:"easy",width:10,height:10},{name:"medium",width:15,height:15},{name:"hard",width:25,height:25}],n={level:l[0],sound:!0,theme:"light",bombcount:10,time:0,steps:0}}},t={};function s(l){var n=t[l];if(void 0!==n)return n.exports;var a=t[l]={exports:{}};return e[l](a,a.exports,s),a.exports}s.d=(e,t)=>{for(var l in t)s.o(t,l)&&!s.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{function e(e=0,t=100){const s=t-e;let l=Math.random();return l=Math.floor(l*s),l+=e,l}var t=s(619);class l{constructor(e,t){this.isBomb=e,this.coordinates=t}setCellValue(e){this.value=e}setType(){if(this.isBomb)return void this.setCellValue("ðŸ’£");const e=p(this.coordinates);let t=0;e.forEach((e=>{(1===e||e.isBomb)&&t++})),t&&this.setCellValue(t)}showCellValue(){this.cellElem.innerHTML=this.value||""}setFlag(e){this.isFlagged=e,this.cellElem.innerHTML=e?"ðŸš©":"";const t=document.querySelector(".counter");t.value>0&&(t.value-=1),t.innerText=t.value.toString().padStart(3,"0")}open(){this.isOpenned=!0,this.cellElem.classList.remove("cell-light"),this.cellElem.classList.remove("cell-dark"),this.cellElem.classList.add("cell-open"),this.showCellValue()}onCellClick(e=!1){if(this.isFlagged){this.setFlag(!1);const e=document.querySelector(".counter");return e.value+=2,console.log(e.value),void(e.innerText=e.value.toString().padStart(3,"0"))}if(this.value||this.isOpenned){if(this.value&&e||"number"==typeof this.value)this.open();else if(this.isBomb){h.forEach((e=>{e.forEach((e=>{e.isBomb&&e.open()}))})),d(),setTimeout(u,500);const e=document.querySelector(".replay");e.classList.remove("replay-smile"),e.classList.add("replay-dead")}}else{this.open();const e=p(this.coordinates);console.log(e),e.forEach((e=>{e.isOpenned||e.onCellClick(!0)}))}this.showCellValue()}createCellonField(e){const s=document.createElement("div");this.cellElem=s,s.classList.add("cell"),"light"==t.state.theme?s.classList.add("cell-light"):s.classList.add("cell-dark"),this.value&&s.classList.add(`cell-${this.value}`),this.cellElem.addEventListener("click",(()=>this.onCellClick())),this.cellElem.addEventListener("contextmenu",(e=>{e.preventDefault(),this.isFlagged?this.onCellClick():this.setFlag(!0)})),e.append(s)}}const n=function(){const e=document.querySelector("body");e.classList.add("body");const s=document.createElement("main");e.append(s),s.classList.add("main-container");const l=document.createElement("h1");l.innerText="RSS Minesweeper",l.classList.add("title");const n=document.createElement("div");n.classList.add("gameContainer"),s.append(n);const a=document.createElement("div");a.classList.add("settings"),a.classList.add("hide");const c=document.createElement("div");c.classList.add("top"),c.classList.add("btn"),c.innerText="Settings";const o=document.createElement("div");o.classList.add("top"),o.classList.add("score"),o.innerText="Score";const i=document.createElement("div");i.classList.add("top-panel"),n.append(i),i.append(c),i.append(l),i.append(o);const d=document.createElement("div");d.classList.add("sound-check");const r=document.createElement("span");r.innerText="Sound",r.id="soundSet";const m=document.createElement("label");m.classList.add("switch");const u=document.createElement("input");u.classList.add("optionsSwitch"),u.setAttribute("type","checkbox"),u.id="soundSet",u.checked=!0;const h=document.createElement("span");h.classList.add("slider"),h.classList.add("round"),m.append(u),m.append(h),d.append(r),d.append(m),a.append(d),n.append(a);const p=document.createElement("div");p.innerText="Appearence mode",p.classList.add("theme-check"),a.append(p),["light","dark"].forEach((e=>{const s=document.createElement("div");s.classList.add("theme");const l=document.createElement("input");l.setAttribute("type","radio"),l.id=e,l.name="theme",l.value=e;const n=document.createElement("label");n.innerText=e,n.setAttribute("for","theme"),s.append(l),s.append(n),p.append(s),e===t.state.theme&&(l.checked=!0)}));const v=document.createElement("div");v.innerText="Difficulty level",v.classList.add("level-check"),a.append(v),["easy","medium","hard"].forEach((e=>{const s=document.createElement("div");s.classList.add("level");const l=document.createElement("input");l.setAttribute("type","radio"),l.id=e,l.name="level",l.value=e;const n=document.createElement("label");n.innerText=e,e===t.state.level.name&&(l.checked=!0),n.setAttribute("for","level"),s.append(l),s.append(n),v.append(s)})),a.append(v);const f=document.createElement("div");f.classList.add("panel");const L=document.createElement("div");L.classList.add("counter"),L.value=t.state.bombcount,L.innerText=L.value.toString().padStart(3,"0");const g=document.createElement("div");g.classList.add("replay"),g.classList.add("replay-smile");const y=document.createElement("div");y.classList.add("timer"),y.value=0,y.innerText=y.value.toString().padStart(3,"0");const E=document.createElement("div");E.classList.add("bombs");const b=document.createElement("input");b.setAttribute("type","range"),b.name="bombs",b.id="bombs",b.value=10,b.setAttribute("min","1"),b.setAttribute("max","99");const S=document.createElement("label");S.setAttribute("for","bombs"),S.innerText="   Bombs",E.append(b),E.append(S),n.append(f),f.append(L),f.append(g),f.append(y),a.append(E);const k=document.createElement("div");k.classList.add("field"),10==t.state.level.height?k.classList.add("field-small"):15==t.state.level.height?k.classList.add("field-medium"):25==t.state.level.height&&k.classList.add("field-large");const q=[[e,"body"],[k,"field"],[f,"panel"],[n,"gameContainer"],[L,"counter"],[g,"replay"],[y,"timer"],[a,"settings"],[c,"btn"],[o,"score"]];return q.forEach((e=>{e[0].classList.add("theme-change")})),"light"==t.state.theme?q.forEach((e=>{e[0].classList.add(`${e[1]}-light`)})):q.forEach((e=>{e[0].classList.add(`${e[1]}-dark`)})),n.append(k),k}(),{state:a}=s(619);function c(){const e=document.querySelector(".timer");e.value+=1,e.innerText=e.value.toString().padStart(3,"0")}let o;function i(){o=setInterval(c,1e3),document.querySelector(".field").removeEventListener("click",(()=>{console.log("click"),i()}),{once:!0})}function d(){clearInterval(o);const e=document.querySelector(".timer");a.time=e.value,e.value=0,e.innerText=e.value.toString().padStart(3,"0")}function r(){document.querySelector(".field").addEventListener("click",(()=>{console.log("click"),i()}),{once:!0})}function m(){const e=document.querySelector(".field");e.replaceChildren(),v();const s=document.querySelector(".counter");s.value=t.state.bombcount,s.innerText=s.value.toString().padStart(3,"0"),e.removeEventListener("click",(e=>{t.state.steps+=1}))}function u(){confirm("You lose! Play again")&&(m(),r())}let h=[];function p(e){const{x:t,y:s}=e,l=h[s-1]?.[t],n=h[s-1]?.[t+1],a=h[s]?.[t+1],c=h[s+1]?.[t+1],o=h[s+1]?.[t],i=h[s+1]?.[t-1],d=h[s]?.[t-1],r=h[s-1]?.[t-1];return[l,n,a,c,o,i,d,r].filter((e=>void 0!==e))}function v(s=t.state.level.width,a=t.state.level.height,c=t.state.bombcount){h=Array.from({length:a},(()=>Array.from({length:s},(()=>0)))),console.log(h),function(t){let s=t;const l=h.length,n=h[0].length;for(;s;){const t=e(0,n-1),a=e(0,l-1);h[a][t]||(h[a][t]=1,s-=1)}}(c),h.forEach(((e,t)=>{e.forEach(((e,s)=>{const a=function(e,t){const s=new l(e,t);return s.setCellValue(),s.setType(),s.createCellonField(n),s}(Boolean(e),{x:s,y:t});h[t][s]=a}))}));const o=document.querySelector(".replay");o.classList.contains("replay-dead")&&(o.classList.remove("replay-dead"),o.classList.add("replay-smile"))}v(),function(){const e=document.querySelector(".btn"),s=document.querySelector(".settings");e.addEventListener("click",(()=>{e.classList.contains("btn-pressed")?(e.classList.remove("btn-pressed"),s.classList.add("hide")):(e.classList.add("btn-pressed"),s.classList.remove("hide"))})),document.getElementsByName("theme").forEach((e=>{e.addEventListener("change",(function(){t.state.theme=this.value,console.log(t.state),function(){const e=document.querySelectorAll(".cell"),s=document.querySelector("body"),l=document.querySelector(".field"),n=document.querySelector(".panel"),a=document.querySelector(".gameContainer"),c=document.querySelector(".counter"),o=document.querySelector(".replay"),i=document.querySelector(".timer"),d=document.querySelector(".score"),r=document.querySelector(".btn"),m=[[s,"body"],[l,"field"],[n,"panel"],[a,"gameContainer"],[c,"counter"],[o,"replay"],[i,"timer"],[document.querySelector(".settings"),"settings"],[r,"btn"],[d,"score"]];"light"===t.state.theme?(m.forEach((e=>{e[0].classList.add(`${e[1]}-light`),e[0].classList.remove(`${e[1]}-dark`)})),e.forEach((e=>{e.classList.add("cell-light"),e.classList.remove("cell-dark")}))):(m.forEach((e=>{e[0].classList.remove(`${e[1]}-light`),e[0].classList.add(`${e[1]}-dark`)})),e.forEach((e=>{e.classList.remove("cell-light"),e.classList.add("cell-dark")})))}()}))})),document.getElementsByName("level").forEach((e=>{e.addEventListener("change",(function(){t.levels.forEach((s=>{e.value==s.name&&(t.state.level=s,function(){const e=document.querySelector(".field");10==t.state.level.height?(e.classList.add("field-small"),e.classList.remove("field-large"),e.classList.remove("field-medium")):15==t.state.level.height?(e.classList.add("field-medium"),e.classList.remove("field-large"),e.classList.remove("field-small")):25==t.state.level.height&&(e.classList.add("field-large"),e.classList.remove("field-small"),e.classList.remove("field-medium")),e.replaceChildren(),v()}())})),d(),r()}))})),document.querySelector(".replay").addEventListener("click",(()=>{m(),d(),r()}));const l=document.getElementById("bombs");l.addEventListener("change",(()=>{t.state.bombcount=l.value,m(),d(),r()})),document.querySelector(".field").addEventListener("click",(e=>{t.state.steps+=1})),r()}()})()})();